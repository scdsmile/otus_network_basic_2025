# Лабораторная работа 3 - Расчёт подсетей IPv4

## Задачи
1. Определение подсетей по IPv4-адресу

2. Расчет подсетей по IPv4-адресу

## Общие сведения/сценарий

Умение работать с IPv4-подсетями и определять информацию о сетях и узлах на основе известного IP-адреса и маски подсети необходимо для понимания принципов работы IPv4-сетей. Цель первой части — закрепить знания о том, как рассчитывать IP-адрес сети на основе известного IP-адреса и маски подсети. Зная IP-адрес и маску подсети, вы всегда сможете получить другие данные об этой подсети.

## Задание №1

### Дано:
|                 Параметр |         Значение |
| ------------------------ | ---------------- |
|          IP-адрес узла:  | 192.168.200.139  |
| Исходная маска подсети:  | 255.255.255.0    |
|    Новая маска подсети:  | 255.255.255.224  |
	
### Переведём маски в двоичный вид и посчитаем длину масок.

Используем для перевода четвертого октета новой маски 8-битную таблицу степеней двойки, разложим на ней число 224.
> Остальные 3 октета, очевидно, заполнены единицами, так как 255 – это максимально возможное 8-битное число.

| 128 | 64 | 32 | 16 | 8 | 4 | 2 | 1 |
| --- | -- | -- | -- | - | - | - | - |
|   1 |	 1 |  1 |  0 | 0 | 0 | 0 | 0 |	

В итоге имеем:

|                 |               Двоичное представление | Количество бит |
| --------------- | ------------------------------------ | -------------- |
| Исходная маска  | 11111111.11111111.11111111.00000000  |            /24 |
|    Новая маска  | 11111111.11111111.11111111.11100000  |            /27 |

Как мы видим из двоичного представления, в четвертом октете мы на подсеть «отнимаем» **3 бита**, оставшиеся **5 бит** – узловая часть.

> Также можно руководствоваться битовой длиной масок:
> 
> Количество бит подсети: $$27-24=3$$
> 
> Количество бит узлов: $$32-27=5$$

### Вычислим количество подсетей и узлов

Количество возможных созданных подсетей мы вычисляем возведением 2 в степень количества битов подсети: $$2^3 = 8$$

Количество узлов в подсети вычисляем возведением 2 в степень количества битов узлов: $$2^5-2 = 32-2 = 30$$

> При подсчёте количества узлов вычитаем 2 адреса – адрес сети и широковещательный адрес.

### Определим сетевой адрес подсети:

Для этого возьмём адрес узла $$192.168.200.139$$ и переведём его к двоичному представлению.

> Первые три октета можно вообще не трогать, так как по исходной маске они, очевидно, фиксированы, но для закрепления материала переведем все.

192:

| 128 | 64 | 32 | 16 | 8 | 4 | 2 | 1 |
| --- | -- | -- | -- | - | - | - | - |
|   1 |	 1 |  0 |  0 | 0 | 0 | 0 | 0 |

168:

| 128 | 64 | 32 | 16 | 8 | 4 | 2 | 1 |
| --- | -- | -- | -- | - | - | - | - |
|   1 |	 0 |  1 |  0 | 1 | 0 | 0 | 0 |

200:

| 128 | 64 | 32 | 16 | 8 | 4 | 2 | 1 |
| --- | -- | -- | -- | - | - | - | - |
|   1 |	 1 |  0 |  0 | 1 | 0 | 0 | 0 |

139:

| 128 | 64 | 32 | 16 | 8 | 4 | 2 | 1 |
| --- | -- | -- | -- | - | - | - | - |
|   1 |	 0 |  0 |  0 | 1 | 0 | 1 | 1 |

Результат: $$192.168.200.139 = 11000000.10101000.11001000.10001011$$

Для вычисления адреса сети оставим в узловой части нули: $$11000000.10101000.11001000.10000000$$

И переведём последний октет в десятичную систему:

| 128 | 64 | 32 | 16 | 8 | 4 | 2 | 1 |
| --- | -- | -- | -- | - | - | - | - |
|   1 |	 0 |  0 |  0 | 0 | 0 | 0 | 0 |

Итого имеем адрес подсети $$192.168.200.128$$

### Вычислим адреса первого и последнего узлов, а также широковещательный:

Адрес первого узла – это адрес сети + 1, соответственно получаем $$192.168.200.129$$

Адрес последнего узла найдём исходя из того, что мы уже посчитали количество узлов (30), прибавим их к адресу сети, получаем $$192.168.200.158$$

Ну и широковещательный адрес можем вычислить либо прибавив к адресу сети 32 ($$2^5=32$$ или $$00011111 = 32$$), тем самым узнаем адрес следующей подсети ($$192.168.200.160$$) и отнимем 1, либо просто возьмём следующий адрес после адреса последнего узла, в любом случае получаем $$192.168.200.159$$

> В этом задании мы работаем с одним октетом и малым количеством адресов, поэтому я изначально посчитал довольно криво, как подсказывала логика.
>
> На самом деле удобнее сначала вычислить широковещательный адрес, а уже потом адрес последнего узла.
> 
> Во время выполнения второго задания я вспомнил/узнал, что в широковещательном адресе вся узловая часть заполнена единицами. Это несколько упрощает процесс:
>
> Берём наш адрес $$11000000.10101000.11001000.10001011$$ и забиваем последние 5 бит единицами: $$11000000.10101000.11001000.10011111$$
>
> Получаем тот же адрес $$192.168.200.159$$, отталкиваясь от которого уже проще выяснить адрес последнего узла подсети: $$192.168.200.159 - 1 = 192.168.200.158$$
